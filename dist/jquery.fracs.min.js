/*! jquery-fracs v1.0.0 - https://larsjung.de/jquery-fracs/ */
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var n,i,o=window,e=o.document,r=o.jQuery,s=r(o),l=r(e),h=r.extend,u=r.isFunction,c=Math.max,f=Math.min,a=Math.round,p=function(t,n){return _typeof(t)===n},v=function(t,n){return t instanceof n},d=function(t){return t&&t.nodeType},w=function(t){return d(t)?t:v(t,r)?t[0]:void 0},b=(n={},i=1,function(t){return t?(n[t]||(n[t]=i,i+=1),n[t]):0}),t=function(t,i,e){return r.each(t,function(t,n){e=Reflect.apply(i,n,[e,t,n])}),e},m=function(t,n,i){if(t===n)return!0;if(!t||!n||t.constructor!==n.constructor)return!1;for(var e=0,o=i.length;e<o;e+=1){var r=i[e];if(t[r]&&u(t[r].equals)&&!t[r].equals(n[r]))return!1;if(t[r]!==n[r])return!1}return!0};function g(t,n,i,e){this.left=a(t),this.top=a(n),this.width=a(i),this.height=a(e),this.right=this.left+this.width,this.bottom=this.top+this.height}function y(t,n,i,e){this.visible=t||0,this.viewport=n||0,this.possible=i||0,this.rects=e&&h({},e)||null}function T(t,n){this.els=t,this.viewport=n}h(g.prototype,{equals:function(t){return m(this,t,["left","top","width","height"])},area:function(){return this.width*this.height},relativeTo:function(t){return new g(this.left-t.left,this.top-t.top,this.width,this.height)},intersection:function(t){if(!v(t,g))return null;var n=c(this.left,t.left),i=f(this.right,t.right),e=c(this.top,t.top),o=i-n,r=f(this.bottom,t.bottom)-e;return 0<=o&&0<=r?new g(n,e,o,r):null},envelope:function(t){if(!v(t,g))return this;var n=f(this.left,t.left),i=c(this.right,t.right),e=f(this.top,t.top);return new g(n,e,i-n,c(this.bottom,t.bottom)-e)}}),h(g,{ofContent:function(t,n){return t&&t!==e&&t!==o?n?new g(0,0,t.scrollWidth,t.scrollHeight):new g(t.offsetLeft-t.scrollLeft,t.offsetTop-t.scrollTop,t.scrollWidth,t.scrollHeight):new g(0,0,l.width(),l.height())},ofViewport:function(t,n){return t&&t!==e&&t!==o?n?new g(t.scrollLeft,t.scrollTop,t.clientWidth,t.clientHeight):new g(t.offsetLeft,t.offsetTop,t.clientWidth,t.clientHeight):new g(s.scrollLeft(),s.scrollTop(),s.width(),s.height())},ofElement:function(t){var n=r(t);if(!n.is(":visible"))return null;var i=n.offset();return new g(i.left,i.top,n.outerWidth(),n.outerHeight())}}),h(y.prototype,{equals:function(t){return this.fracsEqual(t)&&this.rectsEqual(t)},fracsEqual:function(t){return m(this,t,["visible","viewport","possible"])},rectsEqual:function(t){return m(this.rects,t.rects,["document","element","viewport"])}}),h(y,{of:function(t,n){if(t=d(t)&&g.ofElement(t)||t,n=d(n)&&g.ofViewport(n)||n||g.ofViewport(),!v(t,g))return new y;var i=t.intersection(n);if(!i)return new y;var e=i.area(),o=f(t.width,n.width)*f(t.height,n.height);return new y(e/t.area(),e/n.area(),e/o,{document:i,element:i.relativeTo(t),viewport:i.relativeTo(n)})}});var k=["width","height","left","right","top","bottom"],S=["possible","visible","viewport"],E=function(t,n){return t.val-n.val},_=function(t,n){return n.val-t.val};function q(t){var n=g.ofContent(t,!0),i=g.ofViewport(t,!0),e=n.width-i.width,o=n.height-i.height;this.content=n,this.viewport=i,this.width=e<=0?null:i.left/e,this.height=o<=0?null:i.top/o,this.left=i.left,this.top=i.top,this.right=n.right-i.right,this.bottom=n.bottom-i.bottom}function x(t){this.el=t||o}h(T.prototype,{sorted:function(n,t){var i=this.viewport;return r.map(this.els,function(t){return{el:t,val:function(t,n,i){var e;return k.includes(i)?e=g.ofElement(t):S.includes(i)&&(e=y.of(t,n)),e?e[i]:0}(t,i,n)}}).sort(t?_:E)},best:function(t,n){return this.els.length?this.sorted(t,n)[0]:null}}),h(q.prototype,{equals:function(t){return m(this,t,["width","height","left","top","right","bottom","content","viewport"])}}),h(x.prototype,{equals:function(t){return m(this,t,["el"])},scrollState:function(){return new q(this.el)},scrollTo:function(t,n,i){var e=this.el===o?r("html,body"):r(this.el);t=t||0,n=n||0,i=isNaN(i)?1e3:i,e.stop(!0).animate({scrollLeft:t,scrollTop:n},i)},scroll:function(t,n,i){var e=this.el===o?s:r(this.el);t=t||0,n=n||0,this.scrollTo(e.scrollLeft()+t,e.scrollTop()+n,i)},scrollToRect:function(t,n,i,e){n=n||0,i=i||0,this.scrollTo(t.left-n,t.top-i,e)},scrollToElement:function(t,n,i,e){var o=g.ofElement(t).relativeTo(g.ofContent(this.el));this.scrollToRect(o,n,i,e)}});var V={$target:s,init:function(){this.callbacks=r.Callbacks("memory unique"),this.curr_val=null,this.prev_val=null,this.$target.on("load resize scroll",r.proxy(this.check,this))},bind:function(t){this.callbacks.add(t)},unbind:function(t){t?this.callbacks.remove(t):this.callbacks.empty()},check:function(t){var n=this.updatedValue(t);return void 0!==n&&(this.prev_val=this.curr_val,this.curr_val=n,this.callbacks.fireWith(this.context,[this.curr_val,this.prev_val]),!0)}};function C(t,n){this.context=t,this.viewport=n,this.init()}function L(t,n,i,e){this.context=new T(t,n),this.property=i,this.descending=e,this.init()}function W(t){t&&t!==o&&t!==e?(this.context=t,this.$target=r(t)):this.context=o,this.init()}h(C.prototype,V,{updatedValue:function(){var t=y.of(this.context,this.viewport);if(!t.equals(this.curr_val))return t}}),h(L.prototype,V,{updatedValue:function(){var t=this.context.best(this.property,this.descending);if(t&&(t=0<t.val?t.el:null,this.curr_val!==t))return t}}),h(W.prototype,V,{updatedValue:function(){var t=new q(this.context);if(!t.equals(this.curr_val))return t}});var H={content:function(t){return this.length?g.ofContent(this[0],t):null},envelope:function(){return t(this,function(t){var n=g.ofElement(this);return t?t.envelope(n):n})},fracs:function(t,i,e){p(t,"string")||(e=i,i=t,t=null),u(i)||(e=i,i=null),e=w(e);var o="fracs."+b(e);return"unbind"===t?this.each(function(){var t=r(this).data(o);t&&t.unbind(i)}):"check"===t?this.each(function(){var t=r(this).data(o);t&&t.check()}):u(i)?this.each(function(){var t=r(this),n=t.data(o);n||(n=new C(this,e),t.data(o,n)),n.bind(i)}):this.length?y.of(this[0],e):null},intersection:function(){return t(this,function(t){var n=g.ofElement(this);return t?t.intersection(n):n})},max:function(t,n,i){return u(n)||(i=n,n=null),i=w(i),n?(new L(this,i,t,!0).bind(n),this):this.pushStack(new T(this,i).best(t,!0).el)},min:function(t,n,i){return u(n)||(i=n,n=null),i=w(i),n?(new L(this,i,t).bind(n),this):this.pushStack(new T(this,i).best(t).el)},rect:function(){return this.length?g.ofElement(this[0]):null},scrollState:function(t,i){var e="fracs.scrollState";return p(t,"string")||(i=t,t=null),"unbind"===t?this.each(function(){var t=r(this).data(e);t&&t.unbind(i)}):"check"===t?this.each(function(){var t=r(this).data(e);t&&t.check()}):u(i)?this.each(function(){var t=r(this),n=t.data(e);n||(n=new W(this),t.data(e,n)),n.bind(i)}):this.length?new q(this[0]):null},scroll:function(t,n,i){return this.each(function(){new x(this).scroll(t,n,i)})},scrollTo:function(t,n,i,e){return r.isNumeric(t)&&(e=i,i=n,n=t,t=null),t=w(t),this.each(function(){t?new x(this).scrollToElement(t,n,i,e):new x(this).scrollTo(n,i,e)})},scrollToThis:function(t,n,i,e){return(e=new x(w(e))).scrollToElement(this[0],t,n,i),this},sort:function(t,n,i){return p(n,"boolean")||(i=n,n=null),i=w(i),this.pushStack(r.map(new T(this,i).sorted(t,!n),function(t){return t.el}))},viewport:function(t){return this.length?g.ofViewport(this[0],t):null}};r.fracs=function(t,n){return y.of(t,n)},r.fracs._={Rect:g,Fractions:y,Group:T,ScrollState:q,Viewport:x,FracsCallbacks:C,GroupCallbacks:L,ScrollStateCallbacks:W},r.fn.fracs=function(){for(var t=H.fracs,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return u(H[i[0]])&&(t=H[i.shift()]),Reflect.apply(t,this,i)}}();