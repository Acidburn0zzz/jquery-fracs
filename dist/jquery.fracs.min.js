/*! jquery-fracs v1.0.0 - https://larsjung.de/jquery-fracs/ */
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var n,i,o=window,e=o.document,r=o.jQuery,s=r(o),l=r(e),h=r.extend,c=r.isFunction,u=Math.max,f=Math.min,a=Math.round,p=function(t,n){return _typeof(t)===n},v=function(t,n){return t instanceof n},d=function(t){return t&&t.nodeType},w=function(t){return d(t)?t:v(t,r)?t[0]:void 0},b=(n={},i=1,function(t){return t?(n[t]||(n[t]=i,i+=1),n[t]):0}),t=function(t,i,e){return r.each(t,function(t,n){e=Reflect.apply(i,n,[e,t,n])}),e},g=function(t,n,i){if(t===n)return!0;if(!t||!n||t.constructor!==n.constructor)return!1;for(var e=0,o=i.length;e<o;e+=1){var r=i[e];if(t[r]&&c(t[r].equals)&&!t[r].equals(n[r]))return!1;if(t[r]!==n[r])return!1}return!0};function m(t,n,i,e){this.left=a(t),this.top=a(n),this.width=a(i),this.height=a(e),this.right=this.left+this.width,this.bottom=this.top+this.height}function y(t,n,i,e){this.visible=t||0,this.viewport=n||0,this.possible=i||0,this.rects=e&&h({},e)||null}function T(t,n){this.els=t,this.viewport=n}h(m.prototype,{equals:function(t){return g(this,t,["left","top","width","height"])},area:function(){return this.width*this.height},relativeTo:function(t){return new m(this.left-t.left,this.top-t.top,this.width,this.height)},intersection:function(t){if(!v(t,m))return null;var n=u(this.left,t.left),i=f(this.right,t.right),e=u(this.top,t.top),o=i-n,r=f(this.bottom,t.bottom)-e;return 0<=o&&0<=r?new m(n,e,o,r):null},envelope:function(t){if(!v(t,m))return this;var n=f(this.left,t.left),i=u(this.right,t.right),e=f(this.top,t.top);return new m(n,e,i-n,u(this.bottom,t.bottom)-e)}}),h(m,{ofContent:function(t,n){return t&&t!==e&&t!==o?n?new m(0,0,t.scrollWidth,t.scrollHeight):new m(t.offsetLeft-t.scrollLeft,t.offsetTop-t.scrollTop,t.scrollWidth,t.scrollHeight):new m(0,0,l.width(),l.height())},ofViewport:function(t,n){return t&&t!==e&&t!==o?n?new m(t.scrollLeft,t.scrollTop,t.clientWidth,t.clientHeight):new m(t.offsetLeft,t.offsetTop,t.clientWidth,t.clientHeight):new m(s.scrollLeft(),s.scrollTop(),s.width(),s.height())},ofElement:function(t){var n=r(t);if(!n.is(":visible"))return null;var i=n.offset();return new m(i.left,i.top,n.outerWidth(),n.outerHeight())}}),h(y.prototype,{equals:function(t){return this.fracsEqual(t)&&this.rectsEqual(t)},fracsEqual:function(t){return g(this,t,["visible","viewport","possible"])},rectsEqual:function(t){return g(this.rects,t.rects,["document","element","viewport"])}}),h(y,{of:function(t,n){if(t=d(t)&&m.ofElement(t)||t,n=d(n)&&m.ofViewport(n)||n||m.ofViewport(),!v(t,m))return new y;var i=t.intersection(n);if(!i)return new y;var e=i.area(),o=f(t.width,n.width)*f(t.height,n.height);return new y(e/t.area(),e/n.area(),e/o,{document:i,element:i.relativeTo(t),viewport:i.relativeTo(n)})}});var k=["width","height","left","right","top","bottom"],V=["possible","visible","viewport"],E=function(t,n){return t.val-n.val},S=function(t,n){return n.val-t.val};function x(t){var n=m.ofContent(t,!0),i=m.ofViewport(t,!0),e=n.width-i.width,o=n.height-i.height;this.content=n,this.viewport=i,this.width=e<=0?null:i.left/e,this.height=o<=0?null:i.top/o,this.left=i.left,this.top=i.top,this.right=n.right-i.right,this.bottom=n.bottom-i.bottom}function q(t){this.el=t||o}h(T.prototype,{sorted:function(n,t){var i=this.viewport;return r.map(this.els,function(t){return{el:t,val:function(t,n,i){var e;return k.includes(i)?e=m.ofElement(t):V.includes(i)&&(e=y.of(t,n)),e?e[i]:0}(t,i,n)}}).sort(t?S:E)},best:function(t,n){return this.els.length?this.sorted(t,n)[0]:null}}),h(x.prototype,{equals:function(t){return g(this,t,["width","height","left","top","right","bottom","content","viewport"])}}),h(q.prototype,{equals:function(t){return g(this,t,["el"])},scrollState:function(){return new x(this.el)},scrollTo:function(t,n,i){var e=this.el===o?r("html,body"):r(this.el);t=t||0,n=n||0,i=isNaN(i)?1e3:i,e.stop(!0).animate({scrollLeft:t,scrollTop:n},i)},scroll:function(t,n,i){var e=this.el===o?s:r(this.el);t=t||0,n=n||0,this.scrollTo(e.scrollLeft()+t,e.scrollTop()+n,i)},scrollToRect:function(t,n,i,e){n=n||0,i=i||0,this.scrollTo(t.left-n,t.top-i,e)},scrollToElement:function(t,n,i,e){var o=m.ofElement(t).relativeTo(m.ofContent(this.el));this.scrollToRect(o,n,i,e)}});var C={init:function(){this.callbacks=r.Callbacks("memory unique"),this.currVal=null,this.prevVal=null,this.checkProxy=r.proxy(this.check,this),this.autoCheck()},bind:function(t){this.callbacks.add(t)},unbind:function(t){t?this.callbacks.remove(t):this.callbacks.empty()},trigger:function(){this.callbacks.fireWith(this.context,[this.currVal,this.prevVal])},check:function(t){var n=this.updatedValue(t);return void 0!==n&&(this.prevVal=this.currVal,this.currVal=n,this.trigger(),!0)},$autoTarget:s,autoEvents:"load resize scroll",autoCheck:function(t){this.$autoTarget[!1===t?"off":"on"](this.autoEvents,this.checkProxy)}};function L(t,n){this.context=t,this.viewport=n,this.init()}function W(t,n,i,e){this.context=new T(t,n),this.property=i,this.descending=e,this.init()}function H(t){t&&t!==o&&t!==e?(this.context=t,this.$autoTarget=r(t)):this.context=o,this.init()}h(L.prototype,C,{updatedValue:function(){var t=y.of(this.context,this.viewport);if(!this.currVal||!this.currVal.equals(t))return t}}),h(W.prototype,C,{updatedValue:function(){var t=this.context.best(this.property,this.descending);if(t&&(t=0<t.val?t.el:null,this.currVal!==t))return t}}),h(H.prototype,C,{updatedValue:function(){var t=new x(this.context);if(!this.currVal||!this.currVal.equals(t))return t}});var R,_,F;F=function t(){for(var n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];var o=t.fracs;return c(t[i[0]])&&(o=t[i[0]],i=i.slice(1)),Reflect.apply(o,this,i)},h(_=function t(){return t.fracs.apply(t,arguments)},(R={statics:{_:{Rect:m,Fractions:y,Group:T,ScrollState:x,Viewport:q,FracsCallbacks:L,GroupCallbacks:W,ScrollStateCallbacks:H},fracs:function(t,n){return y.of(t,n)}},methods:{content:function(t){return this.length?m.ofContent(this[0],t):null},envelope:function(){return t(this,function(t){var n=m.ofElement(this);return t?t.envelope(n):n})},fracs:function(t,i,e){p(t,"string")||(e=i,i=t,t=null),c(i)||(e=i,i=null),e=w(e);var o="fracs.fracs."+b(e);return"unbind"===t?this.each(function(){var t=r(this).data(o);t&&t.unbind(i)}):"check"===t?this.each(function(){var t=r(this).data(o);t&&t.check()}):c(i)?this.each(function(){var t=r(this),n=t.data(o);n||(n=new L(this,e),t.data(o,n)),n.bind(i)}):this.length?y.of(this[0],e):null},intersection:function(){return t(this,function(t){var n=m.ofElement(this);return t?t.intersection(n):n})},max:function(t,n,i){return c(n)||(i=n,n=null),i=w(i),n?(new W(this,i,t,!0).bind(n),this):this.pushStack(new T(this,i).best(t,!0).el)},min:function(t,n,i){return c(n)||(i=n,n=null),i=w(i),n?(new W(this,i,t).bind(n),this):this.pushStack(new T(this,i).best(t).el)},rect:function(){return this.length?m.ofElement(this[0]):null},scrollState:function(t,i){var e="fracs.scrollState";return p(t,"string")||(i=t,t=null),"unbind"===t?this.each(function(){var t=r(this).data(e);t&&t.unbind(i)}):"check"===t?this.each(function(){var t=r(this).data(e);t&&t.check()}):c(i)?this.each(function(){var t=r(this),n=t.data(e);n||(n=new H(this),t.data(e,n)),n.bind(i)}):this.length?new x(this[0]):null},scroll:function(t,n,i){return this.each(function(){new q(this).scroll(t,n,i)})},scrollTo:function(t,n,i,e){return r.isNumeric(t)&&(e=i,i=n,n=t,t=null),t=w(t),this.each(function(){t?new q(this).scrollToElement(t,n,i,e):new q(this).scrollTo(n,i,e)})},scrollToThis:function(t,n,i,e){return(e=new q(w(e))).scrollToElement(this[0],t,n,i),this},softLink:function(n,i,e,o){return o=new q(w(o)),this.filter("a[href^=#]").each(function(){var t=r(this);t.on("click",function(){o.scrollToElement(r(t.attr("href"))[0],n,i,e)})})},sort:function(t,n,i){return p(n,"boolean")||(i=n,n=null),i=w(i),this.pushStack(r.map(new T(this,i).sorted(t,!n),function(t){return t.el}))},viewport:function(t){return this.length?m.ofViewport(this[0],t):null}}}).statics),h(F,R.methods),r.fracs=_,r.fn.fracs=F}();